---
title: "Changelog"
mode: "center"
---
<Update label="Abril 2025 - 2.0.83" description="Invenio Live e Center.">
### üòé Filtro de Usu√°rios por Grupo de Acesso.
Agora, no menu **Usu√°rios ‚Üí Usu√°rios ‚Üí Filtrar**, √© poss√≠vel **filtrar usu√°rios com base em seus Grupos de Acesso**, como

- Administrador 
- Atendente 
- Supervisor 
- Integra√ß√£o API 
- IDR Studio 
- Carteiro Digital 

Essa funcionalidade **facilita pesquisas e a gest√£o de perfis**, permitindo uma **visualiza√ß√£o r√°pida e precisa**
dos usu√°rios por categoria. Com isso, a an√°lise e a tomada de decis√£o tornam-se **mais √°geis e eficientes**.  
</Update>

<Update label="Mar√ßo 2025 - 2.0.83 2.0.48" description="Invenio Live e Center.">
### üòé Notifica√ß√µes Autom√°ticas para Atualiza√ß√µes de Template da Meta WhatsApp.
## Melhoria na Integra√ß√£o com o Meta WhatsApp

Temos o prazer de anunciar uma melhoria significativa em nossa integra√ß√£o com o Meta WhatsApp.

Implementamos uma regra de notifica√ß√£o no webhook de atualiza√ß√£o de template que, automaticamente, dispara um e-mail aos 
respons√°veis financeiros do cliente sempre que ocorre uma altera√ß√£o na categoria que aciona o webhook.

Essa inova√ß√£o assegura que todas as mudan√ßas cr√≠ticas sejam comunicadas de forma imediata, promovendo maior transpar√™ncia e otimizando a gest√£o dos templates.

Com essa atualiza√ß√£o, reafirmamos nosso compromisso com a efici√™ncia e a melhoria cont√≠nua dos nossos servi√ßos.


### üòé **[LIVE] Ordena√ß√£o Personalizada de Mensagens e Eventos por UTC do Usu√°rio.** 
Com o Invenio Live, a experi√™ncia do usu√°rio foi aprimorada. Agora, a ordena√ß√£o das mensagens e eventos √© realizada de 
acordo com o fuso hor√°rio (UTC) definido no perfil de cada usu√°rio, garantindo que todas as intera√ß√µes sejam exibidas 
de forma precisa e personalizada. Essa melhoria assegura que os atendimentos e contatos reflitam o hor√°rio correto, 
proporcionando maior transpar√™ncia e efici√™ncia na comunica√ß√£o.

### üòé **[CENTER] Confirma√ß√£o de Sele√ß√£o de Template.**
Objetivo: Prevenir incidentes (em especial para casos de troca autom√°tica de categoria pela Meta) e sinalizar o cliente 
sobre o uso de templates do tipo marketing independente de ter ou n√£o mudado de status recentemente. 
Na tela de campanhas: ao selecionar um template do tipo Marketing, ser√° aberta uma caixa de confirma√ß√£o com a seguinte mensagem: 
Confirmar sele√ß√£o de template 
O template {nometemplate} √© da categoria Marketing, deseja realizar a campanha com este template?

[Cancelar] [Confirmar] 
Cancelar: O usu√°rio retorna a listagem de templates para selecionar outro. 
Confirmar: Com o template definido o usu√°rio retorna a tela da campanha que estava sendo criada.

### üòé **[CENTER - ROBBU APP] Corre√ß√£o e Ordena√ß√£o de Eventos por UTC do Usu√°rio.**
Detectamos uma quest√£o em que os eventos disparados n√£o eram contabilizados corretamente no contato. 
Especificamente, os eventos comuns n√£o apareciam no front do app nem na vers√£o Desktop, e, para os eventos finalizadores, 
apenas o protocolo de encerramento era registrado, sem exibir o evento finalizador propriamente dito. 
Para resolver esse problema, implementamos uma melhoria que garante a correta ordena√ß√£o dos KPI de Eventos e 
dos Eventos do Sistema, alinhada com a UTC definida no perfil do usu√°rio. Essa corre√ß√£o assegura que todos os 
eventos sejam contabilizados e exibidos de maneira consistente, proporcionando maior transpar√™ncia e efici√™ncia na 
gest√£o dos dados de intera√ß√£o.

</Update>

<Update label="Fevereiro 2025 - 2.0.80/81" description="Invenio Live e Center.">
### üòé **Apresentamos o WhatsApp Flows**
## Uma solu√ß√£o extraordin√°ria para transformar a experi√™ncia de atendimento no WhatsApp!

- **Intera√ß√£o Inteligente:** Envie formul√°rios din√¢micos e integrados em uma √∫nica mensagem, proporcionando uma jornada de usu√°rio flu√≠da, r√°pida e intuitiva.

- **Flexibilidade Total:**
  - **Flows Est√°ticos:** Oferecem uma experi√™ncia completa sem a necessidade de integra√ß√£o externa, garantindo agilidade e simplicidade.
  - **Flows Din√¢micos:** Interagem com sistemas externos para fornecer respostas personalizadas e contextuais, elevando o n√≠vel de atendimento ao cliente.

- **Benef√≠cios Exclusivos:**
  - Eliminam a fragmenta√ß√£o na comunica√ß√£o e reduzem o n√∫mero de mensagens enviadas.
  - Aumentam a efici√™ncia do atendimento e melhoram a satisfa√ß√£o do cliente com uma interface moderna e responsiva.

- **Documenta√ß√£o Oficial:** Baseada na tecnologia da Meta, com total conformidade e robustez. Confira os detalhes na [documenta√ß√£o oficial do WhatsApp Flows](https://developers.facebook.com/docs/whatsapp/flows/).


### "WhatsApp Flows no Invenio Center"


## Tipos de Flows

Existem dois tipos principais de flows no WhatsApp:

1.  **Flows Est√°ticos:**
    - Funcionam sem a necessidade de intera√ß√£o com sistemas externos.
2.  **Flows Din√¢micos:**
    - Interagem com sistemas externos atrav√©s de endpoints para oferecer respostas personalizadas.

**Observa√ß√£o:** O WhatsApp Flows foi desenvolvido para proporcionar uma experi√™ncia otimizada em dispositivos m√≥veis. 
A aus√™ncia de suporte para a vers√£o web reflete uma escolha de design da Meta e n√£o uma limita√ß√£o da funcionalidade.

## Acessando e Criando Flows no Invenio Center

Para acessar e criar flows no Invenio Center, siga os passos abaixo:

1.  No Invenio, os flows est√£o dispon√≠veis em: `Canais > WhatsApp > Waba > Flows`.
2.  Selecione a WABA desejada.
3.  Escolha a op√ß√£o "Flows".
4.  Visualize a lista de flows existentes.
5.  Para criar um novo flow, clique em "+ Criar flow".
6.  Na tela de cria√ß√£o, voc√™ precisar√° fornecer:
    - Nome do flow
    - Categorias
    - Tipo do flow (din√¢mico ou est√°tico)
        - Se o flow for din√¢mico, ser√° necess√°rio vincular um endpoint:
            - Endpoint externo (do cliente, por exemplo)
            - Endpoint interno (customizado cadastrado no Invenio)

**Endpoints:**

# Endpoints em JavaScript

Os endpoints programados utilizando **JavaScript** possuem algumas funcionalidades que precisam ser respeitadas para que funcionem corretamente.

## Palavras Reservadas

Os endpoints possuem algumas constantes e fun√ß√µes predefinidas que s√£o fundamentais para seu funcionamento. Portanto, **n√£o √© poss√≠vel criar novas constantes** com as seguintes palavras reservadas:

- `logger`
- `loggerHistory`
- `response`
- `request`

Caso voc√™ tente definir uma constante com alguma dessas palavras reservadas, o seu endpoint **retornar√° erro**.

## Limita√ß√µes

Os endpoints possuem as seguintes limita√ß√µes:

- **Tempo m√°ximo de execu√ß√£o:** 10 segundos. Se ultrapassar esse limite, ser√° exibido o erro:
  ```json
  {
    "error": "The JavaScript code took more than 10 seconds to execute"
  }
  ```
- **Obrigatoriedade de retorno:** √â necess√°rio sempre retornar algo no endpoint utilizando o m√©todo `response()`. Caso contr√°rio, ser√° exibido o erro:
  ```json
  {
    "error": "Endpoint has no data returned"
  }
  ```

## Vari√°veis Globais

Por padr√£o, existem algumas vari√°veis essenciais para o funcionamento dos endpoints:

### `request`

Vari√°vel que cont√©m v√°rias informa√ß√µes sobre a requisi√ß√£o, como:

- `method` ‚Üí M√©todo da requisi√ß√£o (GET, POST, etc.).
- `headers` ‚Üí Cabe√ßalhos da requisi√ß√£o.
- `body` ‚Üí Corpo da requisi√ß√£o.
- `query` ‚Üí Par√¢metros da query string.

#### Exemplos de Uso:
```javascript
if (request.method === "get") {}

if (request.headers.hasOwnProperty("server")) {}

if (request.body.user.status === "active") {}

if (request.query.user.q === "Nome") {}
```

## M√©todos

Existem alguns m√©todos fundamentais para o funcionamento de um endpoint:

### `logger(data: any)`

M√©todo utilizado para adicionar dados ao **logger** do request, √∫til no processo de debugging.

#### Exemplos:
```javascript
logger(request)
logger(request.body.user)
logger("Testando o log")
logger({data: request, tipo: "Chamada externa"})
```

### `response(data: object, status: number = 200, success: boolean = true)`

M√©todo utilizado para **retornar a resposta do endpoint**.

#### Exemplos:
```javascript
// Retorna sucesso
return response({success: true})

// Retorna erro
return response({error: true}, 400)
```

## Funcionalidades Extras

Al√©m dos aspectos mencionados acima, os endpoints customizados contam com duas funcionalidades adicionais para facilitar a documenta√ß√£o e a organiza√ß√£o do c√≥digo.

### üìå Anota√ß√µes nos Endpoints

- √â poss√≠vel adicionar **anota√ß√µes** diretamente nos endpoints, servindo como documenta√ß√£o integrada.
- Para adicionar, basta clicar em **"Anota√ß√µes"**, inserir as informa√ß√µes desejadas e salvar.
- Isso facilita o entendimento e o uso dos endpoints por toda a equipe 

### Bibliotecas Pr√©-definidas

- A nova funcionalidade permite a **utiliza√ß√£o de bibliotecas externas**, possibilitando a execu√ß√£o de c√≥digos adicionais dentro dos endpoints.
- Isso amplia as possibilidades de **integra√ß√£o e automa√ß√£o** de processos, tornando as implementa√ß√µes mais flex√≠veis e poderosas.

Essas melhorias tornam os endpoints customizados **mais organizados, eficientes e f√°ceis de manter**, garantindo uma melhor experi√™ncia para desenvolvedores e usu√°rios da plataforma.

</Update>

<Update label="Setembro 2024 - 2.0.77 2.0.78" description="Invenio Live e Center.">
## New Features ‚Äì Melhorias

### üòé ID 3329 - Atualiza√ß√£o na Gest√£o de Imagens (Logos de Campanha) no WhatsApp API

Estamos entusiasmados em anunciar uma nova funcionalidade para facilitar a gest√£o da imagem (logos de campanha) 
de exibi√ß√£o dos n√∫meros do WhatsApp API!

### O que mudou?

Anteriormente, a troca de imagem s√≥ podia ser realizada na tela da Positus. Agora, com essa atualiza√ß√£o, a 
mudan√ßa pode ser feita diretamente no **Invenio Center**, tornando o processo mais simples e acess√≠vel para os administradores.

### Benef√≠cios da Atualiza√ß√£o
- **Mais praticidade:** Agora, a gest√£o da imagem pode ser feita de forma direta no Invenio Center.
- **Maior agilidade:** Como a altera√ß√£o n√£o requer aprova√ß√£o por parte do **META**, o processo se torna mais r√°pido.
- **Facilidade na personaliza√ß√£o:** Mantenha a identidade visual do seu neg√≥cio sempre atualizada com menos esfor√ßo.

### Observa√ß√£o Importante
- A altera√ß√£o da imagem **s√≥ pode ser feita um n√∫mero por vez**.
- No momento, **n√£o √© poss√≠vel realizar a opera√ß√£o por lote**.


### ** üòé Alterando a Imagem de Perfil do WhatsApp no Invenio Center**

## Passo a Passo para Alterar a Imagem de Perfil

Siga os passos abaixo para alterar a imagem de perfil da sua conta WhatsApp no Invenio Center:

1.  **Acesse o menu Canais:**
    * No Invenio Center, procure pelo grupo "Recursos" e clique no menu "Canais".

2.  **Selecione WhatsApp:**
    * Em seguida, clique na op√ß√£o "WhatsApp" (conforme imagem abaixo).

3.  **Escolha a conta WhatsApp:**
    * Selecione a conta WhatsApp que deseja alterar a imagem (logo).

4.  **Acesse a se√ß√£o N√∫meros:**
    * Clique em "N√∫meros".

5.  **Edite o perfil do n√∫mero:**
    * Escolha o n√∫mero que deseja alterar a imagem atrav√©s da op√ß√£o "Editar perfil".

6.  **Selecione e salve a imagem:**
    * Selecione o arquivo desejado clicando em `<Selecionar arquivo>`.
    * Ap√≥s preencher os campos obrigat√≥rios ("Sobre" e "Segmento") e os demais que desejar configurar, clique em `<Salvar>`.

## Observa√ß√£o Importante

* O tamanho m√°ximo da imagem √© de 640x640 pixels.

## üòé Novos Filtros de Usu√°rios no Invenio Center

Agora, a tela de lista de usu√°rios conta com novos filtros para uma pesquisa mais precisa e eficiente. Com essas melhorias, voc√™ pode:

- Filtrar usu√°rios por **status** (ativos, inativos ou deletados);
- Filtrar por **usu√°rios com ramal**;
- Filtrar por **segmentos vinculados**.

Esses novos filtros tornam a gest√£o de usu√°rios mais √°gil e organizada! üöÄ

---

## üòé PIX Copia e Cola no Invenio Center

Facilitamos ainda mais o envio de pagamentos! Agora, os clientes podem enviar o **c√≥digo PIX Copia e Cola** diretamente pela **IDR**, permitindo:

- Gera√ß√£o f√°cil do c√≥digo PIX;
- Compartilhamento r√°pido pelo WhatsApp;
- Pagamentos mais √°geis e eficientes com apenas um clique.

Essa funcionalidade melhora a experi√™ncia do cliente final, garantindo transa√ß√µes mais simples e fluidas. üí∞‚ú®

### Como Configurar:
1. Informar a condi√ß√£o;
2. Incluir nova a√ß√£o (**Enviar bot√£o de pagamento no WhatsApp**);
3. Incluir a nova a√ß√£o e clicar em **Criar**

</Update>

<Update label="Agosto 2024 - 2.0.76" description="Invenio Live e Center.">
## Nova Funcionalidade: Controle de Canais no Live

Estamos muito felizes em anunciar uma atualiza√ß√£o que traz mais controle e flexibilidade para o gerenciamento de comunica√ß√µes no **Live**!

### üöÄ O que h√° de novo?
Agora, ao configurar o cadastro de usu√°rios no **Center**, os administradores podem definir com facilidade quais canais de comunica√ß√£o os usu√°rios est√£o autorizados a utilizar. Isso inclui:

- **WhatsApp**
- **E-mail**
- **Outros canais dispon√≠veis**

### üîí Restri√ß√£o de Acesso a Canais
Caso um usu√°rio tente acessar um canal n√£o permitido no **Live**, ele receber√° um **alerta** informando que n√£o possui permiss√£o para enviar mensagens por aquele canal.

### ‚úÖ Benef√≠cios da Nova Funcionalidade
- **Mais controle** sobre as intera√ß√µes realizadas pelos usu√°rios.
- **Cumprimento das regras de comunica√ß√£o** definidas pela empresa.
- **Experi√™ncia mais organizada e segura** para administradores e operadores.

Essa nova feature oferece um **controle mais preciso e eficiente** sobre as intera√ß√µes, garantindo que as regras de comunica√ß√£o sejam seguidas conforme as configura√ß√µes estabelecidas.

## Restri√ß√µes de Canais de Mensagens no Invenio Center

1. No **Invenio Center**, ao **criar** ou **editar** um usu√°rio.
2. No formul√°rio, agora h√° a op√ß√£o **Restri√ß√µes de Canais de Mensagens** dentro do grupo **Canais Restritos** (Chat, E-mail, Facebook, Instagram, SMS, Telegram, Viber, Voz, WhatsApp). Se marcados, esses canais ficar√£o bloqueados para envio de mensagens.
3. No **Live**, caso um usu√°rio tente enviar uma mensagem por um canal restrito (exemplo: WhatsApp), ele receber√° um **alerta de restri√ß√£o**.

---

## üòé NOVO! Configure limites no envio de HSMs

Estamos animados em compartilhar uma nova funcionalidade que trar√° ainda mais **controle e efici√™ncia** para suas opera√ß√µes! Agora, os administradores podem **configurar limites no envio de HSMs** (mensagens), garantindo que um n√∫mero espec√≠fico de mensagens seja enviado dentro de um determinado per√≠odo.

### üìå Benef√≠cios da funcionalidade:
- **Maior controle:** Evite o envio excessivo de mensagens.
- **Personaliza√ß√£o:** Configure regras espec√≠ficas conforme a necessidade da empresa.
- **Conformidade:** Mantenha a comunica√ß√£o dentro dos padr√µes definidos.

### üìå Como configurar limites de envio de HSMs:
1. Acesse **Configura√ß√µes > Conta > Configura√ß√µes de limite de envio de HSM**.
2. V√° para **Conta > Gerenciar**.
3. Defina a **quantidade m√°xima de HSMs** permitida.
4. Configure o **tempo em minutos** para limitar o envio.

### Exemplo de configura√ß√£o:
Voc√™ pode definir que seja permitido o envio de apenas **1 HSM a cada 1440 minutos** (o equivalente a **1 mensagem por dia**).

Essa novidade proporciona uma **gest√£o mais rigorosa e eficiente**, garantindo que as mensagens sejam enviadas dentro dos crit√©rios estabelecidos!

</Update>

<Update label="Julho 2024 - 2.0.74" description="Invenio Live e Center.">
## üòé Integra√ß√£o com GMail no Invenio

Implementamos a funcionalidade de conex√£o com o Google no nosso sistema de integra√ß√£o de e-mails, permitindo o envio e recebimento de mensagens. A integra√ß√£o padr√£o via IMAP/POP do Google foi descontinuada. Portanto, a partir de agora, as caixas de e-mail via Google/Gmail precisar√£o ser conectadas atrav√©s do bot√£o **Conectar com o Google**.

### Importante:
- A mensagem s√≥ ir√° aparecer no Invenio Live caso n√£o tenha sido lida na caixa postal do GMail.
- Agora, al√©m da op√ß√£o de integra√ß√£o com a Microsoft, os usu√°rios tamb√©m podem conectar suas contas via Autentica√ß√£o do Gmail.
- Essa atualiza√ß√£o aumenta a seguran√ßa do sistema, oferecendo mais fatores de autentica√ß√£o para proteger as contas dos usu√°rios.

### Como configurar:
1. No **Invenio Center**, acesse **Recursos** > **Canais** > **E-mail**.
2. Clique em **+Adicionar E-mail**.
3. Em seguida, clique em **Conectar com o Google**.
4. Ap√≥s concluir a conex√£o, clique em **Criar**.

> **Importante:** Conectar com o Google n√£o necessita de configura√ß√µes adicionais como tipo de conta ou configura√ß√µes SMTP.

## üòé Nova Funcionalidade: Frases Prontas no Invenio Center
Essa funcionalidade, frequentemente solicitada por diversos clientes, ser√° agora integrada ao Invenio Center. Perfis de **administrador e supervisor** ter√£o a capacidade de adicionar frases prontas para uso em suas opera√ß√µes, facilitando a padroniza√ß√£o e a efici√™ncia no atendimento.

### Como configurar:
1. Acesse o [Invenio Center](https://inveniocenter.robbu.global/painel/) e no menu **Recursos**, clique na op√ß√£o **Frases**.
2. Voc√™ ser√° levado at√© a tela de **Cadastro de frases**.
3. Clique em **Adicionar frases** e insira um identificador e a mensagem desejada.

---

# Corre√ß√µes de Bugs ‚Äì Bug Fixes

### Bug #ID 4463: Problema no Bot√£o "Pr√≥ximo" (LIVE) - RESOLVIDO
- O erro ocorria no segmento call center com 23 pessoas na fila. O atendimento manual zerava a fila.

### Bug #ID 3508: Webhook enviando m√∫ltiplos itens de protocolo - RESOLVIDO
- O processamento do webhook foi migrado para um **container app** e as regras de processamento foram melhoradas.

### Bug #ID 3568: Filtro de √∫ltimo evento no Live - RESOLVIDO
- Foi aumentado o limite de registros retornados e ajustado o filtro do **Invenio Live**.

### Bug #ID 4702: Inconsist√™ncias no Dashboard Anal√≠tico - RESOLVIDO
- Fechamos conex√µes desnecess√°rias e corrigimos sobreposi√ß√£o de informa√ß√µes.

### Bug #ID 4609: Imagens divergentes no Live - RESOLVIDO
- Ajuste realizado na **API de WebSocket** para gerar URLs corretas.

### Bug #ID 4687: Cliente parado em etapa do fluxo - RESOLVIDO
- Ocorriam casos onde o cliente ficava travado sem motivo na **IDR**.

### Bug #ID 4687: Lentid√£o no retorno de IDR - RESOLVIDO
- Otimiza√ß√£o da estrutura de banco **NoSQL** para evitar concorr√™ncia com SQL.

### Bug #ID 4687: Duplicidade de templates - RESOLVIDO
- Identificada falha pontual onde o sistema criava **dois templates id√™nticos**.

### Bug #ID 4712: Processo de intera√ß√£o no Webchat - RESOLVIDO
- Corre√ß√£o no registro de t√©rmino do chat no **WebSocket**.

### Bug #ID 4820: REP com erro API RegexReplace - RESOLVIDO
- Atualiza√ß√£o da API para suportar maior volume de caracteres.

### Bug #ID 4714: Live indicando contatos na fila geral - RESOLVIDO
- Ajuste nas listas e filas do sistema para corrigir inconsist√™ncias.

---

# Corre√ß√µes de Inconsist√™ncias

### #ID 4630: Timeout na conex√£o SFTP/FTP - RESOLVIDO
- Ajustada a porta SFTP para a correta sa√≠da.

### #ID 4607: Eventos finalizadores sem registro no Live - RESOLVIDO
- Atualizada a vers√£o da **API de eventos finalizadores**.

### #ID 4623: Instabilidade no motor da IDR - RESOLVIDO
- Otimiza√ß√µes no **banco de dados** para melhor estabilidade e tempos de resposta mais r√°pidos.

### #ID 4607: Revis√£o da integra√ß√£o Instagram/Facebook - RESOLVIDO
- Inclus√£o dos bot√µes **Inativar** e **Deletar Integra√ß√£o**.
- Atualiza√ß√£o de tabelas para remo√ß√£o completa de tokens de acesso.

### #ID 4587: Requisi√ß√£o API status code 0 - RESOLVIDO
- Melhorias na **IDR** para evitar que contatos fiquem presos no sistema.

### #ID 4622: Lentid√£o na importa√ß√£o de p√∫blico - RESOLVIDO
- Reiniciado **Job de importa√ß√£o**, restabelecendo processamento normal.

### #ID 4716: Tags do mailing n√£o eram salvas - RESOLVIDO
- Ajustada refer√™ncia necess√°ria para inserir tags corretamente.

### #ID 4590/4609: Atraso no tempo de resposta do Bot - RESOLVIDO
- Corre√ß√£o na **API de WebSocket** e atualiza√ß√£o da regra de gera√ß√£o de URLs.

### #ID 4658: Problema de intera√ß√£o repetida do contato - RESOLVIDO
- Ajuste no fluxo do **Invenio** para evitar erros de intera√ß√£o indevida.

---

Se precisar de ajustes ou quiser incluir mais detalhes, me avise! üöÄ

</Update>