---
title: "Changelog"
mode: "center"
---
<Update label="Abril 2025 - 2.0.83" description="Invenio Live e Center.">
###  Filtro de Usuários por Grupo de Acesso.
Agora, no menu **Usuários → Usuários → Filtrar**, é possível **filtrar usuários com base em seus Grupos de Acesso**, como

- Administrador 
- Atendente 
- Supervisor 
- Integração API 
- IDR Studio 
- Carteiro Digital 

Essa funcionalidade **facilita pesquisas e a gestão de perfis**, permitindo uma **visualização rápida e precisa**
dos usuários por categoria. Com isso, a análise e a tomada de decisão tornam-se **mais ágeis e eficientes**.  
</Update>

<Update label="Março 2025 - 2.0.832 2.0.48" description="Invenio Live e Center.">
###  [CENTER/LIVE] Notificações Automáticas para Atualizações de Template da Meta WhatsApp.
## Melhoria na Integração com o Meta WhatsApp

Temos o prazer de anunciar uma melhoria significativa em nossa integração com o Meta WhatsApp.

Implementamos uma regra de notificação no webhook de atualização de template que, automaticamente, dispara um e-mail aos 
responsáveis financeiros do cliente sempre que ocorre uma alteração na categoria que aciona o webhook.

Essa inovação assegura que todas as mudanças críticas sejam comunicadas de forma imediata, promovendo maior transparência e otimizando a gestão dos templates.

Com essa atualização, reafirmamos nosso compromisso com a eficiência e a melhoria contínua dos nossos serviços.


### **[LIVE] Ordenação Personalizada de Mensagens e Eventos por UTC do Usuário.** 
Com o Invenio Live, a experiência do usuário foi aprimorada. Agora, a ordenação das mensagens e eventos é realizada de 
acordo com o fuso horário (UTC) definido no perfil de cada usuário, garantindo que todas as interações sejam exibidas 
de forma precisa e personalizada. Essa melhoria assegura que os atendimentos e contatos reflitam o horário correto, 
proporcionando maior transparência e eficiência na comunicação.

### **[CENTER] Confirmação de Seleção de Template.**
Objetivo: Prevenir incidentes (em especial para casos de troca automática de categoria pela Meta) e sinalizar o cliente 
sobre o uso de templates do tipo marketing independente de ter ou não mudado de status recentemente. 
Na tela de campanhas: ao selecionar um template do tipo Marketing, será aberta uma caixa de confirmação com a seguinte mensagem: 
Confirmar seleção de template 
O template {nometemplate} é da categoria Marketing, deseja realizar a campanha com este template?

[Cancelar] [Confirmar] 
Cancelar: O usuário retorna a listagem de templates para selecionar outro. 
Confirmar: Com o template definido o usuário retorna a tela da campanha que estava sendo criada.

### **[CENTER - ROBBU APP] Correção e Ordenação de Eventos por UTC do Usuário.**
Detectamos uma questão em que os eventos disparados não eram contabilizados corretamente no contato. 
Especificamente, os eventos comuns não apareciam no front do app nem na versão Desktop, e, para os eventos finalizadores, 
apenas o protocolo de encerramento era registrado, sem exibir o evento finalizador propriamente dito. 
Para resolver esse problema, implementamos uma melhoria que garante a correta ordenação dos KPI de Eventos e 
dos Eventos do Sistema, alinhada com a UTC definida no perfil do usuário. Essa correção assegura que todos os 
eventos sejam contabilizados e exibidos de maneira consistente, proporcionando maior transparência e eficiência na 
gestão dos dados de interação.

</Update>

<Update label="Fevereiro 2025 - 2.0.80/81" description="Invenio Live e Center.">
### **Apresentamos o WhatsApp Flows**
## Uma solução extraordinária para transformar a experiência de atendimento no WhatsApp!

- **Interação Inteligente:** Envie formulários dinâmicos e integrados em uma única mensagem, proporcionando uma jornada de usuário fluída, rápida e intuitiva.

- **Flexibilidade Total:**
  - **Flows Estáticos:** Oferecem uma experiência completa sem a necessidade de integração externa, garantindo agilidade e simplicidade.
  - **Flows Dinâmicos:** Interagem com sistemas externos para fornecer respostas personalizadas e contextuais, elevando o nível de atendimento ao cliente.

- **Benefícios Exclusivos:**
  - Eliminam a fragmentação na comunicação e reduzem o número de mensagens enviadas.
  - Aumentam a eficiência do atendimento e melhoram a satisfação do cliente com uma interface moderna e responsiva.

- **Documentação Oficial:** Baseada na tecnologia da Meta, com total conformidade e robustez. Confira os detalhes na [documentação oficial do WhatsApp Flows](https://developers.facebook.com/docs/whatsapp/flows/).


### "WhatsApp Flows no Invenio Center"


## Tipos de Flows

Existem dois tipos principais de flows no WhatsApp:

1.  **Flows Estáticos:**
    - Funcionam sem a necessidade de interação com sistemas externos.
2.  **Flows Dinâmicos:**
    - Interagem com sistemas externos através de endpoints para oferecer respostas personalizadas.

**Observação:** O WhatsApp Flows foi desenvolvido para proporcionar uma experiência otimizada em dispositivos móveis. 
A ausência de suporte para a versão web reflete uma escolha de design da Meta e não uma limitação da funcionalidade.

## Acessando e Criando Flows no Invenio Center

Para acessar e criar flows no Invenio Center, siga os passos abaixo:

1.  No Invenio, os flows estão disponíveis em: `Canais > WhatsApp > Waba > Flows` (vide imagem abaixo).
2.  Selecione a WABA desejada.
3.  Escolha a opção "Flows".
4.  Visualize a lista de flows existentes.
5.  Para criar um novo flow, clique em "+ Criar flow".
6.  Na tela de criação, você precisará fornecer:
    - Nome do flow
    - Categorias
    - Tipo do flow (dinâmico ou estático)
        - Se o flow for dinâmico, será necessário vincular um endpoint:
            - Endpoint externo (do cliente, por exemplo)
            - Endpoint interno (customizado cadastrado no Invenio)

**Endpoints:**

- Usar seu endpoint próprio.
- Criar um novo endpoint customizado para o flow em questão.
- Usar um endpoint customizado já existente para o flow em questão.

## Edição e Publicação de Flows

- Após criar um flow, você pode editá-lo e personalizá-lo conforme as necessidades do negócio.
- Um flow pode ser editado, deletado ou publicado (a publicação ocorre na API da Meta).

## Enviando Flows

Você pode enviar um flow de WhatsApp usando a ação "Enviar flow de WhatsApp" da IDR (vide exemplo abaixo).


 ### "Nova Ferramenta: Endpoints Customizados"


## Endpoints Customizados: Flexibilidade e Agilidade na Integração

Prepare-se para elevar sua integração a um novo patamar com a nossa inovadora ferramenta de **Endpoints Customizados**. Desenvolvida para oferecer máxima flexibilidade e agilidade, essa solução permite a criação, edição, exclusão e utilização de APIs programadas em JavaScript, conectando e potencializando suas operações de forma inteligente e personalizada.

## Principais Benefícios

### Flexibilidade Total

- Crie APIs sob medida para diversas finalidades, adaptando a solução às necessidades específicas do seu negócio.

### Integração Inteligente

- Conecte-se facilmente a flows dinâmicos e otimize o uso em IDRs através da ação "API - Chamada Externa", garantindo uma comunicação mais fluida e robusta.

### Funcionalidades Ampliadas

Desenvolva endpoints para uma ampla variedade de funcionalidades, incluindo:

- Validação de CPF.
- Verificação de datas.
- Integração com APIs de clientes.
- Organização de listas, entre outras aplicações.

### Agilidade e Personalização

- Reduza o tempo de desenvolvimento e adapte suas integrações com rapidez, proporcionando uma experiência de usuário superior e atendendo às demandas do mercado de forma proativa.

## Transforme sua Operação

Com os Endpoints Customizados, sua empresa ganha uma poderosa ferramenta para criar soluções únicas e eficientes, 
impulsionando a inovação e melhorando a performance das suas integrações. Prepare-se para oferecer aos seus clientes um 
atendimento mais ágil, personalizado e tecnológico.

**Observação:** Para realizar o CRUD (Criar, Ler, Atualizar, Deletar) de um endpoint, é necessário ter as permissões 
liberadas no usuário.

Para listar os endpoints customizados de um cliente, siga o passo a passo abaixo.

1. Para criar um endpoint basta clicar em “+ Criar endpoint”, após isso, será exigida uma descrição para o endpoint.
2. Após a criação, uma tela com o código do endpoint será aberta, permitindo que você programe em JavaScript. 
Por exemplo, é possível implementar a validação de um CPF.
3. Após atualizar o endpoint você já pode testá-los via Postman;

# Endpoints em JavaScript

Os endpoints programados utilizando **JavaScript** possuem algumas funcionalidades que precisam ser respeitadas para que funcionem corretamente.

## Palavras Reservadas

Os endpoints possuem algumas constantes e funções predefinidas que são fundamentais para seu funcionamento. Portanto, **não é possível criar novas constantes** com as seguintes palavras reservadas:

- logger
- loggerHistory
- response
- request

Caso você tente definir uma constante com alguma dessas palavras reservadas, o seu endpoint **retornará erro**.

## Limitações

Os endpoints possuem as seguintes limitações:

- **Tempo máximo de execução:** 10 segundos. Se ultrapassar esse limite, será exibido o erro:
  json
  {
    "error": "The JavaScript code took more than 10 seconds to execute"
  }
  
- **Obrigatoriedade de retorno:** É necessário sempre retornar algo no endpoint utilizando o método "response()". 
Caso contrário, será exibido o erro:
  json
  {
    "error": "Endpoint has no data returned"
  }
  

## Variáveis Globais

Por padrão, existem algumas variáveis essenciais para o funcionamento dos endpoints:

### request

Variável que contém várias informações sobre a requisição, como:

- method → Método da requisição (GET, POST, etc.).
- headers → Cabeçalhos da requisição.
- body → Corpo da requisição.
- query → Parâmetros da query string.

#### Exemplos de Uso:
javascript
if (request.method === "get") {}

if (request.headers.hasOwnProperty("server")) {}

if (request.body.user.status === "active") {}

if (request.query.user.q === "Nome") {}


## Métodos

Existem alguns métodos fundamentais para o funcionamento de um endpoint:

### logger(data: any)

Método utilizado para adicionar dados ao **logger** do request, útil no processo de debugging.

#### Exemplos:
javascript
logger(request)
logger(request.body.user)
logger("Testando o log")
logger({data: request, tipo: "Chamada externa"})


### response(data: object, status: number = 200, success: boolean = true)

Método utilizado para **retornar a resposta do endpoint**.

#### Exemplos:
javascript
// Retorna sucesso
return response({success: true})

// Retorna erro
return response({error: true}, 400)


## Funcionalidades Extras

Além dos aspectos mencionados acima, os endpoints customizados contam com duas funcionalidades adicionais para facilitar a 
documentação e a organização do código.

###  Anotações nos Endpoints

- É possível adicionar **anotações** diretamente nos endpoints, servindo como documentação integrada.
- Para adicionar, basta clicar em **"Anotações"**, inserir as informações desejadas e salvar.
- Isso facilita o entendimento e o uso dos endpoints por toda a equipe.

### Bibliotecas Pré-definidas

- A nova funcionalidade permite a **utilização de bibliotecas externas**, possibilitando a execução de códigos adicionais 
dentro dos endpoints.
- Isso amplia as possibilidades de **integração e automação** de processos, tornando as implementações mais flexíveis e poderosas.

Essas melhorias tornam os endpoints customizados **mais organizados, eficientes e fáceis de manter**, 
garantindo uma melhor experiência para desenvolvedores e usuários da plataforma.

</Update>