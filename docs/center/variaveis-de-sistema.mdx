---
title: "Vari√°veis de Sistema"
sidebarTitle: "Vari√°veis de Sistema"
description: "Refer√™ncia completa de vari√°veis do Invenio Center: personalize mensagens, fluxos de IDR, templates de HSM, campanhas e integra√ß√µes via API com vari√°veis globais e de base de dados."
---

As **vari√°veis de sistema** permitem personalizar mensagens, conduzir decis√µes do bot e registrar informa√ß√µes durante o atendimento.

## Tipos de Vari√°vel

<Warning>
**Dois tipos com escopos diferentes:**

| Tipo | Sintaxe | Onde pode ser usado |
|------|---------|---------------------|
| **Global** | `@NomePessoa` | IDR, templates, campanhas, HSM, API |
| **Base de Dados** | `{{contactname}}` | **Apenas** no fluxo de IDR (chatbot) |

**Exce√ß√£o:** `@identificadororiginal` (Global) √© usada **apenas em fluxos de IDR**.
</Warning>

**Exemplos de uso:**
- `{{contactfirstname}}` ‚Üí retorna o primeiro nome do contato no fluxo IDR
- `@PrimeiroNome` ‚Üí retorna o primeiro nome em templates, campanhas e HSM

---

## Vari√°veis de Contato

Dados cadastrais e de identifica√ß√£o do contato.

| Vari√°vel | Tipo | Descri√ß√£o |
|----------|------|-----------|
| `{{contactname}}` / `@NomePessoa` | Base de dados / Global | Nome completo do contato |
| `{{contactfirstname}}` / `@PrimeiroNome` | Base de dados / Global | Primeiro nome do contato |
| `{{contactlastname}}` | Base de dados | √öltima palavra do nome do contato |
| `{{contactemail}}` | Base de dados | E-mail principal do contato |
| `{{contactid}}` / `@CPFCNPJ` | Base de dados / Global | CPF ou CNPJ cadastrado no Invenio |
| `{{contactcustomcode}}` / `@ChaveCliente` | Base de dados / Global | C√≥digo do cliente no Invenio |
| `{{contactphonenumber}}` | Base de dados | N√∫mero de telefone completo (DDI + DDD + n√∫mero) |
| `{{contactphonenumberareacode}}` | Base de dados | Apenas o DDD do contato |
| `{{contactphonenumbermain}}` | Base de dados | N√∫mero sem DDI e DDD |
| `{{contactrobbuid}}` | Base de dados | `hashPessoa` (ID do contato) para uso em fluxos disparados externamente |

---

## Vari√°veis de Atendimento

Dados sobre o atendimento, operador, segmento e protocolo.

| Vari√°vel | Tipo | Descri√ß√£o |
|----------|------|-----------|
| `{{segmentname}}` | Base de dados | Segmento (carteira) atual do contato |
| `{{protocol}}` | Base de dados | N√∫mero do protocolo de atendimento |
| `{{username}}` / `@NomeUsuario` | Base de dados / Global | Nome do operador que enviou a √∫ltima mensagem |
| `{{loyalusername}}` | Base de dados | Nome do operador atualmente fidelizado ao contato |
| `{{lastloyalusername}}` | Base de dados | Nome do **√∫ltimo operador** que atendeu o contato |
| `{{internalwhatsappnumber}}` | Base de dados | N√∫mero do WhatsApp utilizado pelo bot |
| `{{lastsentmessage}}` | Base de dados | √öltima mensagem enviada ao contato |
| `{{fileurl}}` | Base de dados | URL do arquivo recebido/baixado durante o atendimento |

---

## Vari√°veis de Data e Hora

| Vari√°vel | Tipo | Descri√ß√£o |
|----------|------|-----------|
| `{{currentdate}}` | Base de dados | Data atual no formato `dd/MM/yyyy` |
| `{{currentdatetime}}` | Base de dados | Data e hora no formato `dd/MM/yyyy HH:mm:ss:ff` |
| `{{currenttime}}` | Base de dados | Hora atual no formato `HH:mm:ss:ff` |
| `{{currenthour}}` | Base de dados | Hora atual no formato `HH:mm` |
| `{{currentdateformat}}` | Base de dados | Data formatada de acordo com o `CodPais` do cliente |

---

## Vari√°veis Coringa

Campos livres para personaliza√ß√£o tempor√°ria por contato. Amplamente usados em campanhas, fluxos automatizados e templates.

| Vari√°vel | Tipo | Limite |
|----------|------|--------|
| `{{contactjoker1}}` / `@Coringa1` | Base de dados / Global | At√© 300 caracteres |
| `{{contactjoker2}}` / `@Coringa2` | Base de dados / Global | At√© 300 caracteres |
| `{{contactjoker3}}` / `@Coringa3` | Base de dados / Global | At√© 300 caracteres |
| `{{contactjoker4}}` / `@Coringa4` | Base de dados / Global | At√© 300 caracteres |
| `{{contactjoker5}}` / `@Coringa5` | Base de dados / Global | At√© 300 caracteres |

<Tip>
**Exemplo de uso em mensagem:** `"Ol√°, @PrimeiroNome! Sua parcela com @Coringa1 vence em @Coringa2."`
No envio, cada vari√°vel √© substitu√≠da pelo valor do contato na campanha.
</Tip>

---

## Vari√°veis T√©cnicas e de Integra√ß√£o

Usadas para processos integrados com API e l√≥gicas condicionais no fluxo.

| Vari√°vel | Tipo | Descri√ß√£o |
|----------|------|-----------|
| `{{message}}` | Base de dados | √öltima mensagem recebida do contato |
| `{{lastapiresponse}}` | Base de dados | Resposta da √∫ltima chamada de API executada |
| `{{lastapistatuscode}}` | Base de dados | C√≥digo de status HTTP da √∫ltima chamada de API (ex: `200`, `404`) |
| `{{AdData}}` | Base de dados | Dados da publicidade que o contato acionou via Facebook/Instagram |

---

## Vari√°veis de Localiza√ß√£o e Navega√ß√£o

| Vari√°vel | Tipo | Descri√ß√£o |
|----------|------|-----------|
| `{{longitude/latitude}}` | Base de dados | Coordenadas geogr√°ficas recebidas na intera√ß√£o do contato |
| `@identificadororiginal` | Global* | Redireciona o contato para a √∫ltima etapa de "Aguardar mensagem de resposta" |

<Note>
**`@identificadororiginal`:** Embora seja uma vari√°vel global (sintaxe `@`), ela s√≥ funciona **dentro de fluxos de IDR** ‚Äî n√£o √© aplic√°vel em templates, campanhas ou HSM.
</Note>

---

## Links Relacionados

<CardGroup cols={2}>
  <Card
    title="Templates de WhatsApp"
    icon="whatsapp"
    href="https://docs.robbu.global/docs/center/como-criar-templates-whatsapp"
  >
    Usar vari√°veis globais em templates
  </Card>

  <Card
    title="Importa√ß√£o de P√∫blico"
    icon="users"
    href="https://docs.robbu.global/docs/center/publico-importacao"
  >
    Preencher Coringas no mailing CSV
  </Card>

  <Card
    title="Campanhas de WhatsApp"
    icon="bullhorn"
    href="https://docs.robbu.global/docs/center/campanhas-de-whatsapp"
  >
    Aplicar vari√°veis em campanhas
  </Card>

  <Card
    title="Campanhas de E-mail"
    icon="envelope"
    href="https://docs.robbu.global/docs/center/campanhas-de-email"
  >
    Tags de e-mail e personaliza√ß√£o
  </Card>

  <Card
    title="Campanhas de SMS"
    icon="message-sms"
    href="https://docs.robbu.global/docs/center/criando-campanha-sms"
  >
    Vari√°veis em mensagens de SMS
  </Card>

  <Card
    title="Enviar Mensagem (Live)"
    icon="paper-plane"
    href="https://docs.robbu.global/docs/live/enviar-mensagem"
  >
    Usar vari√°veis via API
  </Card>
</CardGroup>

---

## ‚ÅâÔ∏è Perguntas Frequentes (FAQ)

<AccordionGroup>
  <Accordion title="üìå Qual a diferen√ßa entre vari√°veis Globais e de Base de Dados?">
    | Caracter√≠stica | Global (`@`) | Base de Dados (`{{}}`) |
    |---|---|---|
    | Sintaxe | `@NomePessoa` | `{{contactname}}` |
    | IDR (chatbot) | ‚úÖ Sim | ‚úÖ Sim |
    | Templates WhatsApp | ‚úÖ Sim | ‚ùå N√£o |
    | Campanhas (WhatsApp, Email, SMS) | ‚úÖ Sim | ‚ùå N√£o |
    | Envio manual HSM | ‚úÖ Sim | ‚ùå N√£o |
    | API Send | ‚úÖ Sim | ‚ùå N√£o |

    **Regra pr√°tica:** Se vai usar fora do chatbot ‚Üí use `@Variavel`. Se √© fluxo interno de IDR ‚Üí ambas funcionam.
  </Accordion>

  <Accordion title="üî§ Como inserir vari√°veis nas mensagens?">
    **Vari√°veis de Base de Dados (IDR):**
    ```
    Ol√°, {{contactfirstname}}! Seu protocolo √© {{protocol}}.
    ```

    **Vari√°veis Globais (templates, campanhas, HSM):**
    ```
    Ol√°, @PrimeiroNome! Sua chave √© @ChaveCliente.
    ```

    **Equivalentes:** `{{contactname}}` = `@NomePessoa` ‚Äî use conforme o contexto.
  </Accordion>

  <Accordion title="üéØ Para que servem as vari√°veis Coringa?">
    Armazenam informa√ß√µes **personalizadas por contato**, preenchidas no arquivo de importa√ß√£o (CSV).

    **Caso de uso cl√°ssico:**
    - `CORINGA 1` = nome da empresa do cliente
    - `CORINGA 2` = data de vencimento
    - Mensagem: `"Ol√°, @PrimeiroNome! @Coringa1 tem uma pend√™ncia com vencimento em @Coringa2."`

    Dispon√≠vel como `{{contactjoker1}}` em IDR e `@Coringa1` em templates/campanhas.
  </Accordion>

  <Accordion title="üì° Como usar vari√°veis de API na IDR?">
    Ap√≥s executar uma a√ß√£o de chamada de API no fluxo:

    - `{{lastapiresponse}}` ‚Üí captura o corpo da resposta JSON
    - `{{lastapistatuscode}}` ‚Üí captura o c√≥digo HTTP (use para l√≥gica condicional: se `200` ‚Üí sucesso, se `404` ‚Üí n√£o encontrado)

    **Exemplo de uso:** Chamar API de consulta de CPF ‚Üí capturar o status ‚Üí criar condi√ß√£o `{{lastapistatuscode}} == 200` para prosseguir.
  </Accordion>

  <Accordion title="üìç Como funciona a vari√°vel @identificadororiginal?">
    Usada para **retornar o contato** √† √∫ltima etapa de "Aguardar mensagem de resposta" do fluxo IDR.

    **√ötil quando:** O contato enviou uma mensagem fora do contexto esperado e voc√™ quer redirecion√°-lo ao ponto onde estava antes.

    ‚ö†Ô∏è Funciona **exclusivamente dentro de fluxos de IDR** ‚Äî n√£o aplic√°vel em templates ou campanhas.
  </Accordion>

  <Accordion title="üì£ Posso usar vari√°veis em templates de WhatsApp?">
    **Sim**, mas apenas vari√°veis **Globais** (`@`):
    - ‚úÖ `@NomePessoa`, `@PrimeiroNome`, `@CPFCNPJ`, `@ChaveCliente`
    - ‚úÖ `@Coringa1` a `@Coringa5`
    - ‚ùå `{{contactname}}`, `{{protocol}}` e demais `{{}}` n√£o funcionam em templates

    Consulte: [Templates de WhatsApp](https://docs.robbu.global/docs/center/como-criar-templates-whatsapp)
  </Accordion>

  <Accordion title="üìò O que √© a vari√°vel {{AdData}}?">
    Captura os **dados da publicidade** (ad) que o contato acionou via **Facebook ou Instagram** antes de iniciar a conversa.

    **Uso:** Permite identificar qual an√∫ncio gerou o contato, para personalizar o fluxo de acordo com a campanha de origem (ex: exibir oferta espec√≠fica do an√∫ncio clicado).

    √â uma vari√°vel **Base de Dados** ‚Äî dispon√≠vel apenas em fluxos de IDR.
  </Accordion>

  <Accordion title="üÜî O que √© a vari√°vel {{contactrobbuid}}?">
    Cont√©m o **`hashPessoa`** ‚Äî o identificador interno √∫nico do contato no Invenio.

    **Quando usar:** Em fluxos **disparados externamente** via API, onde √© necess√°rio referenciar o contato pelo seu ID interno na plataforma.

    √â uma vari√°vel **Base de Dados** ‚Äî dispon√≠vel apenas em fluxos de IDR.
  </Accordion>
</AccordionGroup>