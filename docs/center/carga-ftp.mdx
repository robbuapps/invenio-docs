---
title: "Carga de Mailing e Campanhas via FTP"
sidebarTitle: "Importa√ß√£o via FTP"
description: "Como alternativa √† importa√ß√£o pelo Invenio Center, tamb√©m √© poss√≠vel realizar a carga de mailing e gera√ß√£o de campanhas automaticamente por meio do protocolo FTP."
---

A importa√ß√£o de mailings e a cria√ß√£o de campanhas podem ser feitas automaticamente atrav√©s do protocolo FTP. Este documento detalha o processo de configura√ß√£o e os padr√µes necess√°rios para garantir o correto funcionamento da importa√ß√£o via FTP.

##  Configura√ß√µes Gerais
 **Tipo de Servi√ßo**: Job recorrente para processamento autom√°tico. <br />
**Frequ√™ncia de Execu√ß√£o**: A cada 2 minutos para garantir a importa√ß√£o cont√≠nua dos arquivos.<br />
**IPs de Sa√≠da**: `191.233.248.49` `104.41.0.210`  (Certifique-se de liberar esse IP em seu firewall caso utilize um servi√ßo FTP/SFTP pr√≥prio).

##  Configura√ß√£o da Conex√£o FTP

Para que a importa√ß√£o ocorra corretamente, √© necess√°rio configurar a conex√£o com o servidor FTP.

<img src="https://i0.wp.com/robbu.global/wp-content/uploads/2022/06/Animacao2.gif?resize=768%2C453&ssl=1" />

###  Par√¢metros de Conex√£o

 Acesse as configura√ß√µes de FTP na plataforma:

[Acesse a p√°gina de configura√ß√µes](https://inveniocenter.robbu.global/painel/configuracoes)

   - Navegue at√©: `Configura√ß√µes > FTP`
  
 Preencha os seguintes campos:

   - **Servidor**: Endere√ßo do servidor FTP (exemplo: `ftp.robbu.com.br`).
   - **Usu√°rio**: Nome de usu√°rio para autentica√ß√£o.
   - **Senha**: Senha de acesso.
   - **Porta**: `FTP ‚Üí porta padr√£o 21` ou `SFTP ‚Üí porta padr√£o 22`
   - **Modo de criptografia**: A escolha depende das exig√™ncias do servidor utilizado. O tipo mais comum √© **Use Expl√≠cito**.

>‚ö†Ô∏è **Aten√ß√£o**:
>
> Ao configurar, n√£o inclua `https://` no in√≠cio da URL. Informe apenas o endere√ßo do servidor (exemplo: ftp.seudominio.com).
>
>  N√£o utilize **IPs privados** como host.  
>  Exemplos a evitar:  
> - `10.x.x.x`  
> - `172.16.x.x` at√© `172.31.x.x`  
> - `192.168.x.x`  


**Caso sua empresa n√£o possua um servidor FTP, acesse:**

 `Configura√ß√µes >> Conta >> Gerenciar >> FTP` 

 [Acesse a p√°gina de configura√ß√µes da conta](https://inveniocenter.robbu.global/painel/configuracoes/conta)

<img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/ftpconfig.png" />

Habilite o bot√£o **Habilitar transfer√™ncia de arquivos**

<img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/habilitando FTP.png" />

> ‚ö†Ô∏è **Aten√ß√£o**  
> O servidor disponibilizado pela **Invenio** √© do tipo **SFTP**. Portanto, inclua no in√≠cio da URL o prefixo `sftp://`.  
> **Exemplo:** `sftp://sarobbuinveniosftp.xyz.core.windows.net`  
> A porta utilizada para conex√£o √© a **22**.

### Teste de conex√£o

 - Utilize um cliente FTP (exemplo: `FileZilla` ou `WinSCP`) para validar a conex√£o.
 - Confirme o acesso enviando um arquivo de teste.

>‚ùó**Observa√ß√£o**: Ao incluir os dados do servidor em `Configura√ß√µes > FTP`, o sistema exibe imediatamente se a conex√£o foi bem-sucedida ou n√£o.

<img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/conexaosucesso.png" />
<img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/conexaosemsucesso.png" />

##  Regras de Nomenclatura dos Arquivos

Os arquivos a serem importados devem seguir uma nomenclatura padronizada. Isso √© essencial para que o sistema consiga process√°-los corretamente.

###  Padr√£o de Nomenclatura

| Par√¢metro                     | Descri√ß√£o |
|--------------------------------|-----------|
| `mailing`                      | Todo documento de importa√ß√£o dever√° ser iniciado com o termo `mailing`. |
| `_DDMMYY`                      | Representa o dia/m√™s/ano da gera√ß√£o do arquivo. Por seguran√ßa o sistema importar√° apenas os mailings gerados com a data do dia corrente.|
| `_999`                         | Representa a sequ√™ncia de gera√ß√£o do arquivo no dia (n√£o pode haver mais de um arquivo com mesma sequ√™ncia no mesmo dia).|
| `_cXXXXXXXX`                   | C√≥digo da carteira. Se n√£o informado, o arquivo deve estar em uma pasta com o nome da carteira. |
| `_d`                           | Descri√ß√£o do mailing. Se n√£o informado, o nome do arquivo ser√° utilizado. N√£o pode conter `_` (underline). |
| `_h`                           | Indica que o mailing deve ser higienizado. |
| `_smslong`                     | Campanha de SMS (longcode) para o mailing. |
| `_smsshort`                    | Campanha de SMS (shortcode) para o mailing. |
| `_whatsappexclusivo`           | Campanha de WhatsApp Oficial usando n√∫mero exclusivo. |
| `_whatsappcompartilhado`       | Campanha de WhatsApp Oficial usando n√∫mero compartilhado. |
| `_nw99999999999`               | N√∫mero de WhatsApp Oficial (exclusivo) pelo qual a campanha ser√° enviada. |
| `_ntXXXXXXXXXXXXXXXX`          | Nome do template a ser utilizado na campanha de WhatsApp Oficial. |
| `_email`                       | Indica que uma campanha de E-MAIL ser√° realizada para o mailing. |
| `_ceXXXXXXX@XXXX.XXX.XX`       | Conta de e-mail a ser utilizada na campanha. Se n√£o informado, ser√° usada a conta ativa do cliente ou a conta padr√£o da Robbu. |
| `_teXXXXXXXXXXXXXXXX`          | T√≠tulo do e-mail a ser utilizado na campanha. |
| `_iDDMMYYHHMM`                 | Define a data (`DDMMYY`) e hora (`HHMM`) espec√≠ficas para o in√≠cio da campanha. |
| `_q88999`                      | Define envio parcelado: `88%` de envio por lote e `999` minutos de intervalo entre disparos. |
| `_x999`                        | Descarta clientes com qualquer contato receptivo nas √∫ltimas `999` horas. <br /><span style={{ fontSize: '0.8em', opacity: 0.85, display: 'block' }}>‚ö†Ô∏è <strong>Aten√ß√£o:</strong> A nomenclatura deste par√¢metro deve ser definida antes da inclus√£o do par√¢metro <code>_nt</code>, que corresponde ao nome do template.</span> |
| `_limpartag`                   | Substitui todas as tags das pessoas no arquivo pela nova tag definida. |
| `_removercarteiras`            | Remove os contatos das demais carteiras, mantendo apenas a carteira do arquivo. |
| `_LEddMMyyHHmm`                | Define data e hora limite para envio, evitando disparos fora do hor√°rio desejado. |
| `_whatsappprospect`            | Campanha via m√≥dulo WhatsApp Prospect. Obrigat√≥rio informar o template. <br /><span style={{ fontSize: '0.8em', opacity: 0.85, display: 'block' }}>‚ùó<strong>Observa√ß√£o:</strong> Utilize _whatsappprospect apenas quando houver n√∫meros prospects, caso contr√°rio, ocorrer√° falha. Nesta situa√ß√£o, utilize o par√¢metro <code>_whatsappexclusivo</code> junto com a especifica√ß√£o do n√∫mero pelo par√¢metro <code>_nw</code> .</span> |

###  Exemplos de Nomenclatura para Importa√ß√£o via FTP

Aqui est√£o exemplos pr√°ticos de nomenclatura de arquivos para importa√ß√£o de mailings e cria√ß√£o de campanhas via FTP. Utilize essas refer√™ncias para garantir que seus arquivos sejam processados corretamente pelo sistema. 

<ResponseField name="mailing_101117_1.csv" type="string">
  Apenas importar sem especificar carteira (o arquivo deve estar em uma pasta com o nome da carteira).
</ResponseField>

<ResponseField name="mailing_101117_1_c123_dR√©gua 60 dias.csv" type="string">
  Importar na carteira `123`, informando a descri√ß√£o `R√©gua 60 dias`.
</ResponseField>

<ResponseField name="mailing_101117_1_c123_h.csv" type="string">
  Importar na carteira `123` e realizar a higieniza√ß√£o dos contatos.
</ResponseField>

<ResponseField name="mailing_101117_1_cALTORISCO3_smslong_i0102180820.csv" type="string">
  Importar na carteira `ALTORISCO3` e criar uma campanha de SMS Longcode para iniciar em `01/02/18 √†s 08:20`.
</ResponseField>

<ResponseField name="mailing_101117_1_cBRAD_smsshort_q15020.csv" type="string">
  Importar na carteira `BRAD` e criar uma campanha de SMS Shortcode com in√≠cio imediato, enviando `15%` da base a cada `20 minutos`.
</ResponseField>

<ResponseField name="mailing_101117_1_cMAIOR30_whatsappexclusivo_nw11998877665_ntTEMPLATE HOMOLOGADO ITAU_x36.csv" type="string">
  Importar na carteira `MAIOR30` e criar campanha de WhatsApp Oficial (n√∫mero exclusivo) para in√≠cio imediato, descartando contatos que tiveram intera√ß√£o nos √∫ltimos `36 horas`.
</ResponseField>

<ResponseField name="mailing_101117_1_c123_email_teAportunidade!!!_ceAVISO@COMUNICADO.COM.BR.csv" type="string">
  Importar na carteira `123` e criar uma campanha de e-mail para in√≠cio imediato, definindo o t√≠tulo `"Aportunidade!!!"` e utilizando a conta `AVISO@COMUNICADO.COM.BR`.
</ResponseField>



## üîó Links e assuntos relacionados

- [Agendamento de relat√≥rio por FTP](https://docs.robbu.global/docs/center/agendamento-relatorio-ftp)  
- [Configura√ß√µes gerais da conta](https://docs.robbu.global/docs/center/configuracoes-gerais-da%20conta)  

---

## ‚ÅâÔ∏è Perguntas Frequentes (FAQ)

<AccordionGroup>
  <Accordion title="Com qual frequ√™ncia os arquivos s√£o processados pela carga via FTP?">
    O job de importa√ß√£o roda de forma recorrente a cada <b>2 minutos</b>, garantindo a ingest√£o cont√≠nua dos arquivos v√°lidos enviados ao servidor.
  </Accordion>

  <Accordion title="Quais IPs de sa√≠da preciso liberar no meu firewall?">
    Libere os IPs <code>191.233.248.49</code> e <code>104.41.0.210</code> se voc√™ utiliza servidor pr√≥prio (FTP/SFTP). Sem essa libera√ß√£o, a conex√£o pode falhar.
  </Accordion>

  <Accordion title="O que devo preencher nas configura√ß√µes de conex√£o FTP/SFTP?">
    Informe <b>Servidor</b> (sem <code>https://</code>), <b>Usu√°rio</b>, <b>Senha</b>, <b>Porta</b> (FTP 21 / SFTP 22) e o <b>modo de criptografia</b> exigido pelo seu servidor (geralmente <i>Use Expl√≠cito</i> para FTP). Evite usar <b>IPs privados</b> como host.
  </Accordion>

  <Accordion title="N√£o tenho servidor pr√≥prio. Posso usar o SFTP da Invenio?">
    Sim. Em <b>Configura√ß√µes &gt;&gt; Conta &gt;&gt; Gerenciar &gt;&gt; FTP</b>, habilite <b>Transfer√™ncia de arquivos</b> e utilize o endpoint SFTP fornecido com prefixo <code>sftp://</code> e porta <b>22</b>.
  </Accordion>

  <Accordion title="Como valido a conex√£o antes de enviar arquivos reais?">
    Fa√ßa um teste com clientes como <b>FileZilla</b> ou <b>WinSCP</b>. Na pr√≥pria tela <b>Configura√ß√µes &gt; FTP</b>, o sistema indica se a conex√£o foi bem-sucedida ap√≥s salvar.
  </Accordion>

  <Accordion title="Qual formato de arquivo √© aceito para a importa√ß√£o?">
    Utilize arquivos <b>.csv</b> (separados por delimitador padr√£o). Os exemplos de nomenclatura desta documenta√ß√£o consideram <code>.csv</code>.
  </Accordion>

  <Accordion title="O sistema s√≥ importa mailings com qual data no nome do arquivo?">
    Apenas os arquivos cujo nome cont√©m a data do <b>dia corrente</b> no padr√£o <code>_DDMMYY</code> s√£o importados no dia.
  </Accordion>

  <Accordion title="Como funciona a sequ√™ncia no nome do arquivo (ex.: _999)?">
    Representa a ordem do arquivo no dia. <b>N√£o</b> pode haver dois arquivos com a <b>mesma sequ√™ncia</b> no mesmo dia.
  </Accordion>

  <Accordion title="Onde informo a carteira se n√£o usar o par√¢metro _cXXXXXXXX?">
    Se o sufixo <code>_cXXXXXXXX</code> n√£o for informado, coloque o arquivo dentro de uma <b>pasta cujo nome √© a carteira</b>.
  </Accordion>

  <Accordion title="Para que serve o par√¢metro _h no nome do arquivo?">
    O sufixo <code>_h</code> indica que o mailing deve passar por <b>higieniza√ß√£o</b> durante a importa√ß√£o.
  </Accordion>

  <Accordion title="Como agendar o in√≠cio da campanha a partir do arquivo?">
    Use <code>_iDDMMYYHHMM</code> para definir <b>data e hora</b> espec√≠ficas de in√≠cio (ex.: <code>_i0102180820</code> para 01/02/18 08:20).
  </Accordion>

  <Accordion title="Como fracionar o envio da campanha em lotes?">
    Use <code>_q88999</code> para enviar <b>88%</b> por lote com intervalo de <b>999</b> minutos entre disparos.
  </Accordion>

  <Accordion title="Como evitar disparos para quem interagiu recentemente?">
    Utilize <code>_x999</code> para <b>descartar</b> contatos com intera√ß√£o nas √∫ltimas <b>999 horas</b>. Observa√ß√£o: posicione <code>_x</code> antes de <code>_nt</code>.
  </Accordion>

  <Accordion title="Como defino o template e o n√∫mero do WhatsApp Oficial?">
    Para WhatsApp Oficial:  
    ‚Ä¢ <code>_ntNOME_DO_TEMPLATE</code> define o <b>template</b>.  
    ‚Ä¢ <code>_nw11998877665</code> define o <b>n√∫mero exclusivo</b> remetente.  
    Escolha entre <code>_whatsappexclusivo</code> (exclusivo) ou <code>_whatsappcompartilhado</code>.
  </Accordion>

  <Accordion title="Quando devo usar o par√¢metro _whatsappprospect?">
    Use <code>_whatsappprospect</code> apenas quando houver <b>n√∫meros prospects</b>. Caso contr√°rio, utilize <code>_whatsappexclusivo</code> com <code>_nw</code>.
  </Accordion>

  <Accordion title="Como configurar campanhas de e-mail a partir do nome do arquivo?">
    Inclua <code>_email</code> para disparar e-mail, <code>_ceCONTA@DOMINIO</code> para definir a <b>conta remetente</b> e <code>_teT√çTULO</code> para o <b>assunto</b>.
  </Accordion>

  <Accordion title="Posso definir um limite de envio para n√£o disparar fora de hor√°rio?">
    Sim. Use <code>_LEddMMyyHHmm</code> para limitar o <b>prazo m√°ximo</b> de envio (data/hora limite).
  </Accordion>

  <Accordion title="Qual criptografia devo escolher no FTP?">
    Depende do seu servidor. O mais comum √© <b>Expl√≠cito (TLS)</b> em FTP. Para SFTP (porta 22), a sess√£o j√° √© segura por padr√£o via SSH.
  </Accordion>

  <Accordion title="O que fazer se a conex√£o falhar mesmo com as credenciais corretas?">
    Verifique: libera√ß√£o dos <b>IPs</b>, porta/protocolo corretos (21 FTP / 22 SFTP), host sem <code>https://</code>, aus√™ncia de <b>IP privado</b>, e valide via <b>FileZilla</b> ou <b>WinSCP</b>.
  </Accordion>
</AccordionGroup>
