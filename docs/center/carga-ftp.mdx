---
title: "Carga de Mailing e Campanhas via FTP"
sidebarTitle: "Importa√ß√£o via FTP"
description: "Configure a importa√ß√£o autom√°tica de mailings e cria√ß√£o de campanhas via FTP/SFTP no Invenio Center: par√¢metros de conex√£o, nomenclatura de arquivos e exemplos pr√°ticos."
mode: "wide"
---

<Note>
**Configura√ß√µes gerais do job de importa√ß√£o:**
- **Tipo:** Job recorrente para processamento autom√°tico
- **Frequ√™ncia:** A cada **2 minutos**
- **IPs de sa√≠da:** `191.233.248.49` e `104.41.0.210` ‚Äî libere-os no firewall se usar servidor FTP/SFTP pr√≥prio
</Note>

---

## Configurar Conex√£o FTP

<Tabs>
  <Tab title="üåê Servidor Pr√≥prio (FTP/SFTP)" icon="server">
    ### Conex√£o com Servidor Pr√≥prio

    **Caminho:** Invenio Center > Configura√ß√µes > **FTP**

    <Tip>
    **Acesso direto:** [Configura√ß√µes](https://inveniocenter.robbu.global/painel/configuracoes)
    </Tip>

    <Frame caption="Anima√ß√£o de configura√ß√£o da conex√£o FTP">
      <img src="https://i0.wp.com/robbu.global/wp-content/uploads/2022/06/Animacao2.gif?resize=768%2C453&ssl=1" />
    </Frame>

    <Steps>
      <Step title="Acessar configura√ß√µes FTP">
        Acesse: **Invenio Center > Configura√ß√µes > FTP**
      </Step>

      <Step title="Preencher os par√¢metros de conex√£o">
        | Campo | Valor / Observa√ß√£o |
        |-------|--------------------|
        | **Servidor** | Endere√ßo do servidor (ex: `ftp.robbu.com.br`) ‚Äî **sem** `https://` |
        | **Usu√°rio** | Nome de usu√°rio para autentica√ß√£o |
        | **Senha** | Senha de acesso |
        | **Porta** | FTP ‚Üí `21` ¬∑ SFTP ‚Üí `22` |
        | **Modo de criptografia** | Depende do servidor ‚Äî o mais comum √© **Use Expl√≠cito** |
      </Step>

      <Step title="Validar a conex√£o">
        Ap√≥s salvar, o sistema exibe imediatamente se a conex√£o foi bem-sucedida.

        <Frame caption="Conex√£o bem-sucedida">
          <img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/conexaosucesso.png" />
        </Frame>

        <Frame caption="Falha na conex√£o">
          <img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/conexaosemsucesso.png" />
        </Frame>

        Para valida√ß√£o extra, use **FileZilla** ou **WinSCP** enviando um arquivo de teste.
      </Step>
    </Steps>

    <Warning>
    **Regras de preenchimento do servidor:**
    - ‚ùå N√£o inclua `https://` no in√≠cio ‚Äî informe apenas o endere√ßo (ex: `ftp.seudominio.com`)
    - ‚ùå N√£o utilize **IPs privados** como host:
      - `10.x.x.x`
      - `172.16.x.x` at√© `172.31.x.x`
      - `192.168.x.x`
    </Warning>
  </Tab>

  <Tab title="‚òÅÔ∏è SFTP Invenio (sem servidor pr√≥prio)" icon="cloud">
    ### Usar o SFTP da Invenio

    Se sua empresa n√£o possui servidor FTP, utilize o **SFTP fornecido pela Invenio**.

    **Caminho:** Invenio Center > Configura√ß√µes > Conta > Gerenciar > **FTP**

    <Tip>
    **Acesso direto:** [Configura√ß√µes da conta](https://inveniocenter.robbu.global/painel/configuracoes/conta)
    </Tip>

    <Steps>
      <Step title="Acessar FTP nas configura√ß√µes da conta">
        Acesse: **Invenio Center > Configura√ß√µes > Conta > Gerenciar > FTP**

        <Frame caption="Tela de configura√ß√£o do FTP da conta">
          <img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/ftpconfig.png" />
        </Frame>
      </Step>

      <Step title="Habilitar a transfer√™ncia de arquivos">
        Ative o bot√£o **"Habilitar transfer√™ncia de arquivos"**.

        <Frame caption="Habilitando o FTP no Invenio Center">
          <img src="https://robbublob.blob.core.windows.net/docs/invenio-center/ftp/habilitando FTP.png" />
        </Frame>
      </Step>

      <Step title="Conectar com o endpoint SFTP fornecido">
        Use as credenciais geradas com as seguintes configura√ß√µes:

        | Campo | Valor |
        |-------|-------|
        | **Prefixo da URL** | `sftp://` obrigat√≥rio |
        | **Exemplo** | `sftp://sarobbuinveniosftp.xyz.core.windows.net` |
        | **Porta** | `22` |
        | **Protocolo** | SFTP (SSH) |

        <Check>
        O servidor Invenio j√° √© do tipo **SFTP seguro** ‚Äî a criptografia √© nativa via SSH.
        </Check>
      </Step>
    </Steps>
  </Tab>
</Tabs>

---

## Nomenclatura dos Arquivos

Os arquivos devem seguir o padr√£o de nomenclatura abaixo para serem processados corretamente. A ordem dos par√¢metros importa.

**Formato base:** `mailing_DDMMYY_999[_par√¢metros].csv`

| Par√¢metro | Descri√ß√£o |
|-----------|-----------|
| `mailing` | **Obrigat√≥rio** ‚Äî todo arquivo deve come√ßar com `mailing` |
| `_DDMMYY` | Data da gera√ß√£o do arquivo ‚Äî o sistema importa **apenas arquivos com a data do dia corrente** |
| `_999` | Sequ√™ncia do arquivo no dia ‚Äî **n√£o pode haver dois arquivos com mesma sequ√™ncia no mesmo dia** |
| `_cXXXXXXXX` | C√≥digo da carteira ‚Äî se omitido, o arquivo deve estar numa **pasta com o nome da carteira** |
| `_dDESCRICAO` | Descri√ß√£o do mailing ‚Äî se omitido, usa o nome do arquivo. **N√£o pode conter `_` (underline)** |
| `_h` | Higieniza√ß√£o dos contatos durante a importa√ß√£o |
| `_smslong` | Campanha SMS via longcode |
| `_smsshort` | Campanha SMS via shortcode |
| `_whatsappexclusivo` | Campanha WhatsApp Oficial com n√∫mero exclusivo |
| `_whatsappcompartilhado` | Campanha WhatsApp Oficial com n√∫mero compartilhado |
| `_nw99999999999` | N√∫mero de WhatsApp exclusivo para a campanha |
| `_ntNOME_TEMPLATE` | Nome do template WhatsApp a ser utilizado |
| `_email` | Campanha de E-mail para o mailing |
| `_ceEMAIL@DOMINIO` | Conta de e-mail remetente ‚Äî padr√£o: conta ativa do cliente |
| `_teTITULO` | Assunto/t√≠tulo do e-mail da campanha |
| `_iDDMMYYHHMM` | Data e hora de in√≠cio da campanha (ex: `_i0102180820` = 01/02/18 √†s 08:20) |
| `_q88999` | Envio parcelado: `88%` por lote ¬∑ `999` minutos de intervalo |
| `_x999` | Descarta contatos com intera√ß√£o nas √∫ltimas `999` horas ‚Äî **posicionar antes de `_nt`** |
| `_limpartag` | Substitui todas as tags dos contatos pela nova tag do arquivo |
| `_removercarteiras` | Remove o contato das demais carteiras, mantendo apenas a do arquivo |
| `_LEddMMyyHHmm` | Data/hora limite de envio ‚Äî evita disparos fora do hor√°rio desejado |
| `_whatsappprospect` | Campanha via WhatsApp Prospect ‚Äî **usar apenas quando houver n√∫meros prospects** |

<Warning>
**`_whatsappprospect`** deve ser usado **somente quando houver n√∫meros prospects** no arquivo. Caso contr√°rio, use `_whatsappexclusivo` com `_nw` para especificar o n√∫mero. O uso incorreto causa falha na importa√ß√£o.
</Warning>

---

## Exemplos de Nomenclatura

<AccordionGroup>
  <Accordion title="mailing_101117_1.csv">
    **A√ß√£o:** Importa sem especificar carteira.

    O arquivo deve estar em uma pasta cujo nome √© o c√≥digo da carteira.
  </Accordion>

  <Accordion title="mailing_101117_1_c123_dR√©gua 60 dias.csv">
    **A√ß√£o:** Importa na carteira `123` com a descri√ß√£o `R√©gua 60 dias`.
  </Accordion>

  <Accordion title="mailing_101117_1_c123_h.csv">
    **A√ß√£o:** Importa na carteira `123` e executa **higieniza√ß√£o** dos contatos.
  </Accordion>

  <Accordion title="mailing_101117_1_cALTORISCO3_smslong_i0102180820.csv">
    **A√ß√£o:** Importa na carteira `ALTORISCO3` e cria campanha de **SMS Longcode** com in√≠cio em **01/02/18 √†s 08:20**.
  </Accordion>

  <Accordion title="mailing_101117_1_cBRAD_smsshort_q15020.csv">
    **A√ß√£o:** Importa na carteira `BRAD` e cria campanha de **SMS Shortcode** com in√≠cio imediato, enviando **15% da base** a cada **20 minutos**.
  </Accordion>

  <Accordion title="mailing_101117_1_cMAIOR30_whatsappexclusivo_nw11998877665_ntTEMPLATE HOMOLOGADO ITAU_x36.csv">
    **A√ß√£o:** Importa na carteira `MAIOR30`, cria campanha de **WhatsApp Oficial** (n√∫mero exclusivo `11998877665`, template `TEMPLATE HOMOLOGADO ITAU`) com in√≠cio imediato, descartando contatos com intera√ß√£o nas √∫ltimas **36 horas**.
  </Accordion>

  <Accordion title="mailing_101117_1_c123_email_teAportunidade!!!_ceAVISO@COMUNICADO.COM.BR.csv">
    **A√ß√£o:** Importa na carteira `123` e cria campanha de **E-mail** com assunto `Aportunidade!!!` usando a conta `AVISO@COMUNICADO.COM.BR`.
  </Accordion>
</AccordionGroup>

---

## Links Relacionados

<CardGroup cols={2}>
  <Card
    title="Agendamento de Relat√≥rio por FTP"
    icon="server"
    href="https://docs.robbu.global/docs/center/agendamento-relatorio-ftp"
  >
    Envio autom√°tico de relat√≥rios via FTP/SFTP
  </Card>

  <Card
    title="Configura√ß√µes Gerais da Conta"
    icon="gear"
    href="https://docs.robbu.global/docs/center/configuracoes-gerais-da%20conta"
  >
    Configura√ß√µes gerais do ambiente
  </Card>

  <Card
    title="Importa√ß√£o de P√∫blico"
    icon="users"
    href="https://docs.robbu.global/docs/center/publico-importacao"
  >
    Importar mailings pelo Invenio Center
  </Card>
</CardGroup>

---

## ‚ÅâÔ∏è Perguntas Frequentes (FAQ)

<AccordionGroup>
  <Accordion title="‚è±Ô∏è Com que frequ√™ncia os arquivos s√£o processados?">
    O job de importa√ß√£o roda a cada **2 minutos**, garantindo ingest√£o cont√≠nua dos arquivos v√°lidos no servidor.
  </Accordion>

  <Accordion title="üîí Quais IPs liberar no firewall?">
    Se voc√™ usa servidor FTP/SFTP pr√≥prio, libere:
    - `191.233.248.49`
    - `104.41.0.210`

    Sem essa libera√ß√£o, a conex√£o pode falhar silenciosamente.
  </Accordion>

  <Accordion title="‚òÅÔ∏è N√£o tenho servidor pr√≥prio. Como usar o SFTP da Invenio?">
    **Caminho:** Invenio Center > Configura√ß√µes > Conta > Gerenciar > FTP > Habilitar transfer√™ncia de arquivos

    Use o endpoint fornecido com prefixo `sftp://` e porta `22`.
  </Accordion>

  <Accordion title="‚ùå Que erros de configura√ß√£o do servidor devo evitar?">
    | Erro comum | Correto |
    |------------|---------|
    | Incluir `https://` na URL | Apenas o endere√ßo: `ftp.dominio.com` |
    | Usar IP privado como host | Usar dom√≠nio ou IP p√∫blico |
    | Porta errada | FTP = `21` ¬∑ SFTP = `22` |

    Use **FileZilla** ou **WinSCP** para validar antes de configurar na plataforma.
  </Accordion>

  <Accordion title="üìÖ Qual data colocar no nome do arquivo?">
    Sempre a **data do dia corrente** no formato `_DDMMYY`. O sistema ignora arquivos com datas diferentes do dia de processamento.
  </Accordion>

  <Accordion title="üî¢ Como funciona a sequ√™ncia `_999` no nome?">
    Representa a **ordem do arquivo no dia**. N√£o pode haver dois arquivos com a mesma sequ√™ncia no mesmo dia ‚Äî isso causaria conflito de importa√ß√£o.
  </Accordion>

  <Accordion title="üóÇÔ∏è Como informo a carteira se n√£o usar `_cXXX`?">
    Coloque o arquivo em uma **pasta cujo nome √© o c√≥digo da carteira**. O sistema ler√° o nome da pasta como identificador da carteira.
  </Accordion>

  <Accordion title="üì¶ Como fracionar o envio em lotes?">
    Use `_q88999` onde:
    - `88` = percentual da base enviado por lote
    - `999` = intervalo em minutos entre lotes

    **Exemplo:** `_q15020` ‚Üí 15% por lote, a cada 20 minutos.
  </Accordion>

  <Accordion title="üö´ Como excluir contatos que interagiram recentemente?">
    Use `_x999` para descartar contatos com intera√ß√£o nas √∫ltimas `999` horas.

    **‚ö†Ô∏è Aten√ß√£o:** O par√¢metro `_x` deve vir **antes** de `_nt` (nome do template) no nome do arquivo.
  </Accordion>

  <Accordion title="üì© Como configurar campanha de WhatsApp Oficial?">
    Combine os par√¢metros conforme o tipo de n√∫mero:

    - **N√∫mero exclusivo:** `_whatsappexclusivo` + `_nw11999000000` + `_ntNOME_TEMPLATE`
    - **N√∫mero compartilhado:** `_whatsappcompartilhado` + `_ntNOME_TEMPLATE`
    - **Prospect:** `_whatsappprospect` + `_ntNOME_TEMPLATE` (somente se houver n√∫meros prospects)
  </Accordion>
</AccordionGroup>
