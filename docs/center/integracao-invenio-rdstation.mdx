---
title: 'Guia de integração
Invenio X RD Station'
description: 'Integração Invenio x RD Station.'
---

##  Integração Invenio x RD Station

Seguindo a documentação da RD Station, é necessário transformá-la para o **IDR Studio**.

 [Documentação oficial - Obter Tokens de Acesso](https://developers.rdstation.com/reference/obter-tokens-acesso)

---

###  Obtenção e Renovação de Token

- Obtenha o Token de acesso inicial com base no `code`.
- Renove o Token usando o `refresh_token` quando necessário.

---

###  Mapeamento das Variáveis e Validação do Code

- Todas as variáveis devem ser mapeadas corretamente com seus respectivos tipos de conversão.
- Após o mapeamento:
  - Chame a API da RD Station.
  - Valide o retorno com o `code`.
![Mapa de variaveis](https://robbublob.blob.core.windows.net/docs/mapvariaveis.png)

- Todas as variaveis mapeadas com o tipo de conversão
![Mapa de variaveis](https://robbublob.blob.core.windows.net/docs/varmapeadas.png)
#### Possíveis retornos:

- **200 OK**: Token válido, armazenar na variável `Tokenacesso`.
 ![retorno](https://robbublob.blob.core.windows.net/docs/retorno1.png) 
- **Outro status**: Atualizar ou renovar o token e alimentar novamente a variável `Tokenacesso`.
![retorno](https://robbublob.blob.core.windows.net/docs/retorno2.png) 

- Caso o contato tenha um retorno diferente de 200, é preciso atualizar o Token e
alimentar a variável Tokenacesso ou se o Token estiver expirado, renová-lo.
![retorno](https://robbublob.blob.core.windows.net/docs/retorno3.png) 
---

###  Armazenamento do Token

- Após a renovação ou atualização do Token, ele será enviado para uma variável responsável pelo armazenamento do conteúdo mais recente.
![renovação](https://robbublob.blob.core.windows.net/docs/renovacao.png)

- Agora com o Token atualizado/renovado já podemos fazer as conversões e
envio ao RD Station. Como as variáveis já estão mapeadas, é só enviar via POST.
[renovação](https://robbublob.blob.core.windows.net/docs/renovacao1.png)

---

###  Envio para RD Station

- Com o Token atualizado ou renovado:
  - Realize as conversões necessárias.
  - Envie os dados via `POST` para a RD Station.
![envio rdstation](https://robbublob.blob.core.windows.net/docs/enviord.png)
---

###  Mapeamento de Tags

- Mapeie as tags para identificar a origem dos dados.
- Exemplo: adicionar uma tag indicando que um chat foi iniciado no RD Station.
![origem](https://robbublob.blob.core.windows.net/docs/origem.png)
> Todos os envios são realizados via `POST` à RD Station.

