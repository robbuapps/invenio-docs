---
title: "Carteiro Digital API ‚Äì Documentos e Pix"
sidebarTitle: "Carteiro Digital API ‚Äì Documentos e Pix"
description: "A API Carteiro Digital permite o envio automatizado e autenticado de documentos (boletos, faturas, PDFs e Pix) via WhatsApp, com rastreabilidade e valida√ß√£o do destinat√°rio."
---

A **API Carteiro Digital** possibilita o envio seguro de documentos e cobran√ßas pelo WhatsApp, exigindo uma valida√ß√£o do destinat√°rio antes do acesso ao arquivo. A integra√ß√£o √© indicada para envios financeiros e documentos sens√≠veis que requerem autentica√ß√£o.

---

## Autentica√ß√£o

Antes de realizar chamadas √† API do Carteiro Digital, √© necess√°rio obter um token de acesso (`access_token`) utilizando a rota de login. Esse token deve ser enviado no cabe√ßalho das requisi√ß√µes no formato `Authorization: Bearer {access_token}`.

> ‚ö†Ô∏è **Importante**:<br/>
> - O usu√°rio usado para autenticar deve ser do tipo **API**. Consulte [Usu√°rios no Invenio Center](https://docs.robbu.global/docs/center/usuarios).<br/>
> - O campo `expires_in` no response de login define a validade do token; por padr√£o pode ser considerado v√°lido por longos per√≠odos (ex.: 3333 dias). Se a rota de login for executada novamente, o token anterior ser√° invalidado ‚Äî armazene o token e solicite novo somente ao receber `401 Unauthorized`.


### Endpoint de Login

- **M√©todo:** `POST`
- **URL:** `https://api.robbu.global/v1/login`

Body (JSON):

```json
{
  "Company": "NOME_DA_EMPRESA",
  "Username": "USUARIO_API",
  "Password": "SENHAUSUARIO_API"
}
```

Campos:

- `Company`: Nome do ambiente/empresa no Invenio Center.
- `Username`: Usu√°rio com permiss√£o de integra√ß√£o (tipo API).
- `Password`: Senha do usu√°rio.

Exemplo de response de login:

```json
{
  "access_token": "eyJhbGciOi...",
  "expires_in": 287971200,
  "refresh_token": "",
  "token_type": "bearer"
}
```

---

## Endpoint de Envio de Documento

- **M√©todo:** `POST`
- **URL:** `https://api.robbu.global/v2/digitalpostman`

O envio deve incluir o cabe√ßalho `Authorization: Bearer {access_token}`.

**Exemplo de request (completo)**

```json title="POST https://api.robbu.global/v2/digitalpostman" showLineNumbers
{
  "senderName": "Robbu",
  "contactName": "Robbu Teste",
  "contactId": "11122233344",
  "walletCode": "CarteiraTeste",
  "contactPhoneNumber": "5511999999999",
  "invalidTokenMessage": "Op√ß√£o inv√°lida!\r\n\r\nAqui est√£o os nossos canais de atendimento:\r\nüìû551199999999",
  "instructionsMessage": "*Tem d√∫vidas? Fale com a Robbu:üòÄ*\r\nüìû551199999999",
  "documentCollection": [
    {
      "documentCode": "1946753214860",
      "documentFileName": "boleto.pdf",
      "documentBase64": "JVBERi0xLjMKJcTl8uXrp..."
    }
  ]
}
```

---

## Detalhamento dos Campos

| **Campo**              | **Descri√ß√£o** |
|------------------------|---------------|
| `senderName`           | Nome do remetente exibido ao destinat√°rio. |
| `contactName`          | Nome completo do destinat√°rio. |
| `contactId`            | CPF/CNPJ do destinat√°rio ‚Äî usado para valida√ß√£o (3 primeiros d√≠gitos). |
| `walletCode`           | C√≥digo da carteira cadastrada no Invenio. |
| `contactPhoneNumber`   | N√∫mero do destinat√°rio com DDI + DDD (ex.: `5511999999999`). |
| `invalidTokenMessage`  | Mensagem exibida quando o token informado pelo usu√°rio for inv√°lido. |
| `instructionsMessage`  | Mensagem com instru√ß√µes enviada junto ao documento. |
| `documentCollection`   | Array com os documentos a serem enviados (veja estrutura abaixo). |

> ‚ö†Ô∏è **Importante**:<br/>
> - Apenas `invalidTokenMessage` e `instructionsMessage` podem ser totalmente personalizadas; demais mensagens do fluxo s√£o geradas pelo sistema.<br/>
> - As quebras de linha devem usar `\r\n` e emojis utilizados normalmente.

### Estrutura do campo `documentCollection`

| **Campo**            | **Tipo** | **Obrigat√≥rio** | **Descri√ß√£o** |
|----------------------|----------|-----------------|---------------|
| `documentCode`       | String   | Sim             | Linha digit√°vel do boleto ou identificador do documento / c√≥digo Pix. |
| `documentFileName`   | String   | Sim             | Nome do arquivo (ex.: `boleto.pdf`, `qrcode.png`). |
| `documentBase64`     | String   | Sim             | Arquivo codificado em Base64. |
| `documentValue`      | String   | N√£o (Pix: Sim)  | Valor do documento ‚Äî obrigat√≥rio para envios de Pix. |

> ‚ö†Ô∏è **Observa√ß√µes**:<br/>
> - Converta seus arquivos para Base64 antes do envio (use encoders online se necess√°rio).<br/>
> - Respeite os limites de tamanho por tipo de m√≠dia definidos pelo canal (consulte a tabela de limites do WhatsApp no Invenio Center).<br/>

---

## Responses

| **C√≥digo** | **Descri√ß√£o** |
|------------|---------------|
| `200 OK`   | Requisi√ß√£o processada com sucesso; envio iniciado. |
| `400 Bad Request` | Par√¢metros inv√°lidos ou incompletos. |
| `401 Unauthorized` | Token ausente, inv√°lido ou expirado. |
| `404 Not Found` | URL incorreta. |
| `500 Internal Server Error` | Erro interno da API. |

>  A API pode n√£o retornar detalhes de erros de provedores externos (por exemplo Meta/WhatsApp). Para logs e detalhes de entrega, verifique o Invenio Center.

---

## Fluxo de Valida√ß√£o por Token

Ao enviar o documento, o usu√°rio destinat√°rio precisa validar o acesso informando os **3 primeiros d√≠gitos** do `contactId` (CPF/CNPJ). Se a valida√ß√£o for correta, o arquivo √© disponibilizado.

> ‚ö†Ô∏è Observa√ß√£o sobre CPFs iniciados por zero:<br/>
> - Para CPFs que come√ßam com `0`, aceitamos a digita√ß√£o dos tr√™s d√≠gitos com ou sem o zero inicial. Ex.: `011.222.333-44` aceita `011` ou `112`.

---

## Exemplos de uso

- Envio de documento (boleto) ‚Äî j√° mostrado acima.
- Envio de Pix ‚Äî neste caso inclua `documentValue` com o valor do pagamento no objeto do `documentCollection`.



```json title="POST https://api.robbu.global/v2/digitalpostman" showLineNumbers
{
  "senderName": "Robbu",
  "contactName": "Robbu Teste",
  "contactId": "11122233344",
  "walletCode": "c141",
  "contactPhoneNumber": "5511998037663",
  "invalidTokenMessage": "Op√ß√£o inv√°lida!\r\n\r\nAqui est√£o os nossos canais de atendimento:\r\nüìû551199999999",
  "instructionsMessage": "*Tem d√∫vidas? Fale com a Robbu:üòÄ*\r\nüìû551199999999",
  "documentCollection": [
    {
      "documentCode": "c9f1a3b4-82d7-4e0e-9a21-55f4d7b98f10",
      "documentValue": "1200.00",
      "documentFileName": "pix-qrcode.png",
      "documentBase64": "..."
    }
  ]
}
```

---

## üîó Links e assuntos relacionados

- [Configura√ß√µes Gerais da Conta](https://docs.robbu.global/docs/center/configuracoes-gerais-da%20conta)
- [Usu√°rios no Invenio Center](https://docs.robbu.global/docs/center/usuarios)
- [Canal de WhatsApp ‚Äî limites por tipo de m√≠dia](https://docs.robbu.global/docs/center/canal-whatsapp#tabela-de-limites-por-tipo-de-midia)
 - [API Send Message](https://docs.robbu.global/docs/robbu-api/send-message)
 - [Segmentos no Invenio Center](https://docs.robbu.global/docs/center/segmentos)
 - [Canal de WhatsApp (vis√£o geral)](https://docs.robbu.global/docs/center/canal-whatsapp)
 - [Enviar mensagem (Invenio Live)](https://docs.robbu.global/docs/live/enviar-mensagem)

---

## ‚ÅâÔ∏èPerguntas Frequentes (FAQ)

<AccordionGroup>
  <Accordion title="O token de autentica√ß√£o precisa ser gerado para cada requisi√ß√£o?">
    N√£o. Guarde o `access_token` at√© expirar ou at√© a API retornar `401 Unauthorized`.
  </Accordion>
  <Accordion title="Posso enviar mais de um documento ou anexos em um √∫nico disparo?">
    Sim. Adicione m√∫ltiplos objetos dentro do array `documentCollection`.
  </Accordion>
  <Accordion title="Como fa√ßo para converter meu arquivo para Base64 antes do envio?">
    Utilize qualquer conversor online ou uma biblioteca local para gerar o Base64 do arquivo antes de enviar.
  </Accordion>
  <Accordion title="O que acontece se o usu√°rio informar o token de valida√ß√£o incorreto?">
    A mensagem definida em `invalidTokenMessage` ser√° exibida; voc√™ pode personaliz√°-la conforme o fluxo desejado.
  </Accordion>
  <Accordion title="Qual a diferen√ßa entre envio de documento e envio de Pix?">
    Sim. Para Pix, `documentValue` √© obrigat√≥rio e deve conter o valor associado ao pagamento.
  </Accordion>
</AccordionGroup>

---
