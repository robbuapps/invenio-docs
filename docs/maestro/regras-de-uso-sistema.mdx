---
title: Regras de uso do sistema
sidebarTitle: Regras de uso do sistema
description: Esta página define as regras de design do sistema Maestro
---

# Autenticação
```gherkin
#language: pt-BR
Funcionalidade: Autenticação
Como um usuário do sistema
Eu quero me autenticar de forma segura
Para acessar as funcionalidades da aplicação

    Contexto:
        Dado que existe um usuário válido no sistema

# === LOGIN TRADICIONAL ===

    Cenário: Login com credenciais válidas
        Quando eu faço login com as credenciais corretas
        Então devo receber um token de acesso
        E o token deve ter data de expiração válida

    Cenário: Login com senha incorreta
        Quando eu faço login com senha incorreta
        Então devo receber erro de autenticação
        E o contador de tentativas deve ser incrementado

    Cenário: Login com usuário inexistente
        Quando eu faço login com um usuário que não existe
        Então devo receber erro de autenticação

    Cenário: Login com usuário não vinculado ao tenant informado
        Dado que existe um usuário válido no sistema
        E que o usuário não está vinculado ao tenant informado
        Quando eu faço login informando este tenant
        Então devo receber erro de autenticação

    Cenário: Login com usuário bloqueado
        Dado que existe um usuário bloqueado no sistema
        Quando eu faço login com as credenciais do usuário bloqueado
        Então devo receber erro de autenticação
        E devo receber erro informando que a conta está bloqueada

    Cenário: Login em empresa que exige apenas SSO
        Dado que existe um usuário válido no sistema
        E que existe uma empresa configurada para SSO obrigatório
        E que existe um usuário desta empresa
        Quando eu faço login tradicional
        Então devo receber erro informando que SSO é obrigatório

# === LOGIN SSO ===

    Cenário: Gerar URL de login SSO
        Dado que existe uma empresa com SSO configurado
        E que existe um usuário desta empresa
        Quando eu solicito a URL de login SSO
        Então devo receber uma URL válida do Azure AD
        E a URL deve conter as informações da empresa

    Cenário: Falha ao gerar URL SSO para empresa sem configuração
        Dado que existe uma empresa sem SSO configurado
        E que existe um usuário desta empresa
        Quando eu solicito a URL de login SSO
        Então devo receber erro informando que SSO não está configurado

    Cenário: Callback SSO com sucesso
        Dado que existe uma empresa com SSO configurado
        E que existe um usuário desta empresa
        E que tenho um token ID válido do Azure AD
        Quando o callback SSO é processado
        Então devo ser redirecionado para a aplicação
        E a URL deve conter o token e informações da empresa

    Cenário: Callback SSO com token inválido
        Dado que existe uma empresa com SSO configurado
        E que existe um usuário desta empresa
        Quando o callback SSO é processado sem token ID
        Então devo ser redirecionado com erro de token inválido

    Cenário: Login SSO com token válido
        Dado que existe um usuário com acesso ao tenant
        E que tenho um token ID válido com email do usuário
        Quando eu faço login via SSO
        Então devo receber um token de acesso válido

# === RESET DE SENHA ===

    Cenário: Solicitar reset de senha
        Dado que existe um usuário válido no sistema
        Quando eu solicito reset de senha
        Então devo receber confirmação de que o email foi enviado

    Cenário: Solicitar reset para usuário inexistente
        Quando eu solicito reset de senha para usuário inexistente
        Então devo receber erro de usuário não encontrado

    Cenário: Executar reset de senha com token válido
        Dado que existe um usuário com token de reset válido
        Quando eu executo o reset com nova senha válida
        Então a senha deve ser alterada com sucesso
        E eu devo conseguir fazer login com a nova senha

    Cenário: Executar reset com token inválido
        Dado que existe um usuário válido no sistema
        Quando eu executo reset com token inválido
        Então devo receber erro de token inválido
        E a senha não deve ser alterada

    Cenário: Executar reset com senha fraca
        Dado que existe um usuário com token de reset válido
        Quando eu executo reset com senha que não atende aos critérios
        Então devo receber erro de validação de senha
        E a senha não deve ser alterada

```
