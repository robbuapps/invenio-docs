---
title: "API - Consulta de Templates HSM"
description: "Documenta√ß√£o t√©cnica sobre a consulta de templates HSM via API no Invenio."
sidebarTitle: "API Consulta de Templates"
---

##  API - Consulta de Templates HSM

A API de **Consulta de Templates HSM** do Invenio permite visualizar de forma pr√°tica todos os modelos de mensagem estruturada (HSM) cadastrados no ambiente, incluindo aqueles aprovados, pausados ou desabilitados. Essa integra√ß√£o √© ideal para equipes que desejam acompanhar e gerenciar seus templates ativos antes de realizar disparos via WhatsApp Business API.

---

##  Autentica√ß√£o
Para consumir esta API, √© necess√°rio possuir o **token privado da conta** configurada no Invenio. Esse token pode ser localizado ao final da p√°gina de configura√ß√µes da conta dentro do Invenio Center.

![tokens](https://robbublob.blob.core.windows.net/docs/tokens.png)

---

##  Requisi√ß√£o
**URL de requisi√ß√£o:**
```http
http://s.robbu.com.br/wsInvenioAPI.ashx?token={tokenPrivado}&acao=buscartemplates
```

**M√©todo:** `GET`

![postman](https://robbublob.blob.core.windows.net/docs/postman.png)

### Par√¢metros de Consulta
| Par√¢metro       | Obrigat√≥rio | Descri√ß√£o                                                     |
|----------------|-------------|----------------------------------------------------------------|
| `tokenPrivado` | Sim         | Token privado da conta, utilizado para autentica√ß√£o.          |
| `acao`         | Sim         | Valor fixo: `buscartemplates`. Indica a a√ß√£o desejada na API. |

---

## üìÑ Detalhamento dos Campos da Resposta

| Campo                  | Tipo      | Descri√ß√£o                                                       |
|------------------------|-----------|------------------------------------------------------------------|
| `IdCanal`              | Inteiro   | Identificador do canal (1 ‚Äì Email, 2 ‚Äì SMS, 3 ‚Äì WhatsApp).       |
| `NomeTemplate`         | String    | Nome do template no Invenio.                                    |
| `Template`             | String    | Conte√∫do da mensagem.                                           |
| `DataHoraInclusao`     | String    | Data e hora de cria√ß√£o do template.                             |
| `DataHoraExclusao`     | String    | Data de exclus√£o (se aplic√°vel).                                |
| `Broadcast`            | String    | Indica se o template √© usado em disparos massivos.              |
| `NomeTemplateWhatsapp` | String    | Nome do template cadastrado no WhatsApp Business.              |
| `IdFornecedor`         | Inteiro   | ID interno do fornecedor do canal.                              |
| `NamespaceWhatsapp`    | String    | Namespace do template.                                          |
| `Linguagem`            | String    | C√≥digo da linguagem utilizada no template.                      |
| `ProspectOficial`      | Booleano  | Indica se o template √© vinculado a n√∫mero prospect.             |
| `NomeCliente`          | String    | Nome do ambiente da empresa.                                    |
| `StatusWhatsapp`       | String    | Status atual no WhatsApp (APPROVED, PAUSED, REJECTED, etc).     |
| `NomeContaWhatsApp`    | String    | Nome completo da conta do WhatsApp vinculada.                   |
| `HashTemplateMensagem` | String    | Hash √∫nico do conte√∫do da mensagem.                             |
| `HashCarteira`         | String    | Hash da carteira associada.                                     |

---

##  Exemplo de Resposta
```json
[
  {
    "IdCanal": 3,
    "NomeTemplate": "continuidade_chamado_robbu_atendimento_01",
    "Template": "Ol√°, @primeironome, tudo bem?\n\nPodemos retomar o atendimento de seu chamado?\n\nAguardo seu contato, at√© logo!",
    "DataHoraInclusao": "2025-06-01T15:08:36.0866667",
    "DataHoraExclusao": null,
    "Broadcast": "N",
    "NomeTemplateWhatsapp": "continuidade_chamado_robbu_atendimento_01",
    "IdFornecedor": 41,
    "NamespaceWhatsapp": null,
    "Linguagem": "pt_BR",
    "ProspectOficial": null,
    "NomeCliente": "ROBBU ATENDIMENTO",
    "StatusWhatsapp": "APPROVED",
    "NomeContaWhatsApp": "ROBBU ATENDIMENTO - waba Robbu",
    "HashTemplateMensagem": "A316D01E1",
    "HashCarteira": null
  }
]
```


---

##  Recomenda√ß√µes
- O endpoint pode ser acessado diretamente pelo navegador, facilitando testes e valida√ß√µes manuais.
- O retorno da requisi√ß√£o √© um array em formato JSON.
- Para melhor leitura, recomenda-se o uso de ferramentas como Postman ou JSON Formatter.

---

##  FAQ

<AccordionGroup title="D√∫vidas Frequentes">

<Accordion title="Consigo usar essa API em ferramentas como o Postman?">
Sim. Basta colar a URL completa com o token no Postman e realizar uma requisi√ß√£o do tipo GET.
</Accordion>

<Accordion title="√â poss√≠vel consultar apenas templates aprovados?">
N√£o diretamente via API, mas voc√™ pode filtrar localmente os resultados com base no campo `StatusWhatsapp`.
</Accordion>

<Accordion title="Onde encontro o token privado?">
O token est√° dispon√≠vel ao final da p√°gina de "Configura√ß√µes da conta" no Invenio Center.
</Accordion>

<Accordion title="Essa API tamb√©m retorna templates desabilitados ou pausados?">
Sim. Todos os templates cadastrados no ambiente, incluindo os pausados e desabilitados, s√£o listados na resposta.
</Accordion>

<Accordion title="Qual o melhor formato para salvar os templates ap√≥s consulta?">
JSON √© ideal para integra√ß√£o e leitura program√°tica. Para relat√≥rios, voc√™ pode convert√™-los em CSV.
</Accordion>

</AccordionGroup>


